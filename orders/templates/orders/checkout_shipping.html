{% extends "home/base.html" %}
{% block title %}Choose Shipping{% endblock %}

{% block content %}
<div class="container my-4" style="max-width: 820px;">
  <h3 class="mb-3">Choose shipping</h3>

  <form method="post" class="card shadow-sm">
    {% csrf_token %}

    <div class="list-group list-group-flush">
      {% for m in methods %}
        <label class="list-group-item d-flex justify-content-between align-items-center">
          <span>
            <input class="form-check-input me-2" type="radio" name="method" value="{{ m.obj.id }}"
                   {% if form.initial.method == m.obj.id %}checked{% endif %}>
            <strong>{{ m.obj.name }}</strong>
            {% if m.obj.eta %}<span class="text-muted ms-1">— {{ m.obj.eta }}</span>{% endif %}
            {% if m.obj.free_over %}
              <span class="badge bg-light text-dark ms-2">
                Free over €{{ m.obj.free_over }}
              </span>
            {% endif %}
          </span>
          <span class="fw-semibold">
            {% if m.effective == 0 %}Free{% else %}€{{ m.effective }}{% endif %}
          </span>
        </label>
      {% endfor %}
    </div>

    <div class="card-body text-end">
      <div>Items: €{{ items_subtotal }}</div>
      <div>Shipping: €{{ order.shipping_amount }}</div>
      <div class="fs-5">Total: €{{ order.total }}</div>
      <button class="btn btn-primary mt-3 w-100">Continue to payment</button>
    </div>
  </form>
</div>
{% endblock %}
