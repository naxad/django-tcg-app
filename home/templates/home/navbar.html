{% load static %}

<div class="pt-4">
  <!-- Outer nav: keep it clean; no rounded-pill/shadow here -->
  <nav class="navbar navbar-expand-lg navbar-dark theme-nav">
    <!-- The inner pill is applied to this container via CSS -->
    <div class="container-fluid">

      <!-- Brand (CSS positions it outside the pill) -->
      <a class="navbar-brand d-flex align-items-center" href="{% url 'home:home' %}">
        <img src="{% static 'logo.png' %}" alt="ShinyCards" class="brand-logo">
      </a>

      <!-- Toggler -->
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
              data-bs-target="#mainNav" aria-controls="mainNav" aria-expanded="false"
              aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Collapsible -->
      <div class="collapse navbar-collapse" id="mainNav">
        <!-- Left links -->
        <ul class="navbar-nav me-auto mb-2 mb-lg-0 gap-lg-3">
          <li class="nav-item"><a class="nav-link" href="{% url 'browse:browse' %}">Browse</a></li>
          
          <li class="nav-item"><a class="nav-link" href="{% url 'sell:sell' %}">Sell Your Card</a></li>
          <li class="nav-item"><a class="nav-link" href="{% url 'grading:grade' %}">Grade your Card</a></li>

        </ul>

        <!-- Center search -->
        <form class="d-flex mx-lg-3 my-3 my-lg-0 search-form" method="GET" action="{% url 'browse:browse' %}" role="search">
          <input class="form-control me-2" type="search" name="q" placeholder="Search cardsâ€¦" aria-label="Search">
          <button class="search-btn" type="submit" aria-label="Search">ğŸ”</button>
        </form>

        <!-- Right links -->
        <ul class="navbar-nav ms-lg-3 mb-2 mb-lg-0 gap-lg-3 align-items-lg-center">
          <li class="nav-item"><a class="nav-link" href="{% url 'cart:cart' %}">ğŸ›’ Cart</a></li>

          {% if user.is_authenticated %}
            {% if user.is_superuser %}
              <li class="nav-item"><a class="nav-link" href="/admin/">ğŸ› ï¸ Admin</a></li>
            {% endif %}
            {% if user.is_staff %}
              <li class="nav-item"><a class="nav-link" href="{% url 'backoffice:orders_list' %}">ğŸ“¦ Staff</a></li>
            {% endif %}
            <li class="nav-item"><a class="nav-link" href="{% url 'profile' %}">ğŸ‘¤ My Profile</a></li>
            <li class="nav-item">
              <form method="post" action="{% url 'accounts:logout' %}" class="m-0">
                {% csrf_token %}
                <button type="submit" class="nav-link btn btn-link p-0">Logout</button>
              </form>
            </li>
          {% else %}
            <li class="nav-item"><a class="nav-link" href="{% url 'accounts:login' %}">Login</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'accounts:register' %}">Register</a></li>
          {% endif %}
        </ul>
      </div>
    </div>
  </nav>
</div>
